<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/img/estilos.css">
</head>
<body>
  <header>
  <div id="marca">

  </div>  
  <div class="container" id="cliente">
    <a class="btn btn-primary" sec:authorize="hasRole('CLIENTE')"  th:href="@{/casa/filtrarCasas/__${session.usuariosession.id}__}"> 
      Buscar Casa </a>
    <a class="btn btn-primary" sec:authorize="hasRole('CLIENTE')"  th:href="@{/usuario/modificarCliente/__${session.usuariosession.id}__}"> 
      Modificar Perfil</a>        
    <a class="btn btn-primary" sec:authorize="hasRole('CLIENTE')"  th:href="@{/reserva/listarReservas/__${session.usuariosession.id}__}"> 
        Mis Reservas </a> 
      
  </div>
  <div class="container" id="propietario">
    <a class="btn btn-primary" sec:authorize="hasRole('PROPIETARIO')"
        th:href="@{/casa/guardarCasa/__${session.usuariosession.id}__}">
        Guardar Casa</a>


    <a  class="btn btn-primary" sec:authorize="hasRole('PROPIETARIO')"
        th:href="@{/casa/listarCasas/{id}(id=${session.usuariosession.id})}"> <!--de esta forma evitamos darle prioridad, ya que si no teniamos casa agregada buscaba el id y nos largaba error 500  -->
        Mostrar Casas</a>
    
    
    <a class="btn btn-primary" sec:authorize="hasRole('PROPIETARIO')"
        th:href="@{/usuario/modificarPropietario/__${session.usuariosession.id}__}">
        Modificar Propietario</a>
    
    <a class="btn btn-primary" sec:authorize="hasRole('PROPIETARIO')"
        th:href="@{/reserva/listarReservasporPropietario/__${session.usuariosession.id}__}">
        Mostrar Reservas</a>    
</div>
<div class="container" id="admin">
  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')"  th:href="@{/usuario/modificarUsuario/__${session.usuariosession.id}__}"> 
    Modificar Perfil</a>    

  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')"  th:href="@{/cliente/listarClientes}"> 
    Listar Clientes </a>  

  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')"  th:href="@{/propietario/listarPropietarios}"> 
    Listar Propietario </a>   
  
  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')"  th:href="@{usuario/guardarAdmin}"> 
    Agregar Administradores </a>

  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')" th:href="@{usuario/listarAdmins}"> 
    Listar Administradores </a>   

  <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')" th:href="@{casa/listarCasas}"> 
    Listar Casas </a>     
  
    <a class="btn btn-primary" sec:authorize="hasRole('ADMIN')" th:href="@{reserva/listarReservas}"> 
      Listar Reservas </a>      
</div>

</header>
<section>
  



  <div class="container m-5">
    <div th:if="${exito}!=null" class="card text-white bg-success mb-3" >
			<div class="card-body">
				<h5 class="card-title">Exito</h5>
				<p class="card-text" th:text="${exito}"></p>
			</div>
		</div>
		<div th:if="${error}!=null" class="card text-white bg-danger mb-3" >
			<div class="card-body">
				<h5 class="card-title">Error</h5>
				<p class="card-text" th:text="${error}"></p>
			</div>
		</div>
    <div>
      <h2 th:text="'HOLA , TU ALIAS ES: '+ ${session.usuariosession.alias + ' Y CORREO ASOCIADO ' + session.usuariosession.email}">
  </h2>
    </div>
        <div class="col-12">
          <a class="btn btn-primary" th:href="@{/logout}" type="submit">Cerrar Sesión</a>
        </div>
        <div>
        <a class="btn btn-primary" th:href="@{/}" role="button">Volver </a>
      </div>
    </section>
    <div id="medio">
      <h2>Sesión Iniciada</h2>
      <img src="/img/fotoPortada1.jpg">
    </div>
    <footer>

    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>    
</body>
</html>